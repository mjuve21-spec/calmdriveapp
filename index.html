<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CalmDrive</title>

<!-- App Icons -->
<link rel="icon" type="image/png" sizes="32x32" href="images/icon32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="images/icon192x192.png">
<link rel="apple-touch-icon" sizes="512x512" href="images/icon512x512.png">

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
  background:linear-gradient(135deg,#e0f2fe,#bae6fd,#38bdf8);
  color:#0c4a6e;
  min-height:100vh
}

header{
  padding:24px 20px;
  text-align:center;
  background:rgba(255,255,255,0.95);
  border-bottom:3px solid #0ea5e9;
  box-shadow:0 4px 16px rgba(14,165,233,.25)
}

header img{
  width:64px;
  height:64px;
  margin-bottom:10px
}

header h1{font-size:28px;font-weight:700}
header p{color:#0369a1}

nav{
  display:flex;
  background:#fff;
  border-bottom:2px solid #bae6fd
}

nav button{
  flex:1;
  padding:14px;
  border:none;
  background:none;
  font-weight:600;
  color:#0369a1;
  cursor:pointer
}

nav button.active{
  background:#0ea5e9;
  color:#fff
}

section{display:none;padding:20px}
section.active{display:block}

.box{
  background:#fff;
  border-radius:14px;
  padding:20px;
  margin-bottom:16px;
  box-shadow:0 6px 20px rgba(14,165,233,.15)
}

.btn{
  width:100%;
  padding:16px;
  margin:8px 0;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:700;
  cursor:pointer
}

.btn-primary{
  background:#0ea5e9;
  color:#fff
}

.btn-secondary{
  background:#fff;
  border:2px solid #0ea5e9;
  color:#0369a1
}

.warning-box{
  background:#fef2f2;
  border:2px solid #fca5a5;
  padding:12px;
  border-radius:8px;
  color:#991b1b;
  margin-bottom:12px
}

footer{
  text-align:center;
  padding:20px;
  font-size:13px;
  color:#0369a1
}
</style>
</head>

<body>

<header>
  <img src="images/icon192x192.png" alt="CalmDrive Icon">
  <h1>CalmDrive</h1>
  <p>Arrive calm. Arrive safe.</p>
</header>

<nav>
  <button class="active" onclick="showTab('prepare')">Before Drive</button>
  <button onclick="showTab('drive')">While Driving</button>
  <button onclick="showTab('log')">Quick Log</button>
</nav>

<section id="prepare" class="active">
  <div class="box">
    <h2>Pre-Drive Calm Check</h2>
    <ul>
      <li>‚úî Leave early</li>
      <li>‚úî Calm audio ready</li>
      <li>‚úî Breathe slowly</li>
      <li>‚úî Getting there safely matters</li>
    </ul>
  </div>
</section>

<section id="drive">
  <div class="box">
    <h2>Calm Audio Reminders</h2>

    <div class="warning-box">
      ‚ö†Ô∏è Audio only. Never interact with your phone while driving.
    </div>

    <button class="btn btn-primary" onclick="startReminders()">Start Calm Audio</button>
    <button class="btn btn-secondary" onclick="stopReminders()">Stop</button>

    <p id="nowPlaying" style="margin-top:10px;color:#0369a1"></p>
  </div>
</section>

<section id="log">
  <div class="box">
    <h2>Quick Log</h2>
    <button class="btn btn-primary" onclick="saveLog()">Log Calm Drive</button>
  </div>
</section>

<footer>
  CalmDrive ‚Ä¢ Your calm matters
</footer>

<!-- Hidden audio player -->
<audio id="calmAudio" preload="auto"></audio>

<script>
const reminders=[
  "audio/reminder1.mp3",
  "audio/reminder2.mp3",
  "audio/reminder3.mp3",
  "audio/reminder4.mp3",
  "audio/reminder5.mp3",
  "audio/reminder6.mp3"
];

let reminderInterval=null;
const audio=document.getElementById("calmAudio");
const nowPlaying=document.getElementById("nowPlaying");

function playRandom(){
  const file=reminders[Math.floor(Math.random()*reminders.length)];
  audio.src=file;
  audio.volume=0.8;
  audio.play();
  nowPlaying.textContent="üéß Playing calm reminder";
}

function startReminders(){
  stopReminders();
  playRandom();
  reminderInterval=setInterval(playRandom,45000);
}

function stopReminders(){
  clearInterval(reminderInterval);
  audio.pause();
  audio.currentTime=0;
  nowPlaying.textContent="";
}

function showTab(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

function saveLog(){
  const logs=JSON.parse(localStorage.getItem("calmLogs")||"[]");
  logs.unshift({date:new Date()});
  localStorage.setItem("calmLogs",JSON.stringify(logs));
  alert("Logged. Nice calm drive üëç");
}
</script>

</body>
</html>
